<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二次函数 y = ax² + bx + c 动画演示</title>
    <style>
        /* --- 整体布局与样式 --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding: 20px;
            gap: 20px;
            flex-wrap: wrap;
        }

        .main-container {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 25px;
            width: 100%;
            max-width: 500px;
        }

        .side-panel {
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            padding: 25px;
            width: 100%;
            max-width: 350px;
        }

        h1,
        h2,
        h3 {
            text-align: center;
            color: #1a237e;
            margin-top: 0;
        }

        h2 {
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.8em;
            color: #c2185b;
            background-color: #fce4ec;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        /* --- 控制器样式 --- */
        .controls {
            display: grid;
            grid-template-columns: 20px 1fr 50px;
            gap: 15px 10px;
            align-items: center;
        }

        .controls label {
            font-weight: bold;
            font-size: 1.2em;
            font-family: 'Times New Roman', Times, serif;
            color: #3f51b5;
        }

        .controls input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            outline: none;
            border-radius: 5px;
            transition: opacity 0.2s;
        }

        .controls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3f51b5;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .controls input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3f51b5;
            cursor: pointer;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        .controls .value-display {
            font-weight: bold;
            font-size: 1.1em;
            color: #d32f2f;
            text-align: right;
            width: 50px;
        }

        /* --- Canvas 画布样式 --- */
        #graph-canvas {
            border: 1px solid #b0bec5;
            border-radius: 8px;
            background-color: #fafafa;
            width: 100%;
            height: auto;
            aspect-ratio: 1 / 1;
        }

        /* --- 教研员解读样式 --- */
        .explanation {
            margin-top: 20px;
        }

        .explanation h3 {
            color: #00796b;
            border-bottom: 2px solid #b2dfdb;
            padding-bottom: 5px;
            margin-bottom: 10px;
        }

        .explanation p {
            line-height: 1.6;
            font-size: 0.95em;
        }

        .explanation strong {
            color: #d32f2f;
            font-family: 'Courier New', Courier, monospace;
        }
    </style>
</head>

<body>

    <div class="main-container">
        <h1>二次函数曲线动画演示</h1>
        <canvas id="graph-canvas" width="500" height="500"></canvas>
    </div>

    <div class="side-panel">
        <h2>y = <span id="equation-display">1.0x² + 0.0x + 0.0</span></h2>

        <div class="controls">
            <label for="slider-a">a:</label>
            <input type="range" id="slider-a" min="-5" max="5" value="1" step="0.1">
            <span class="value-display" id="value-a">1.0</span>

            <label for="slider-b">b:</label>
            <input type="range" id="slider-b" min="-10" max="10" value="0" step="0.1">
            <span class="value-display" id="value-b">0.0</span>

            <label for="slider-c">c:</label>
            <input type="range" id="slider-c" min="-10" max="10" value="0" step="0.1">
            <span class="value-display" id="value-c">0.0</span>
        </div>

        <div class="explanation">
            <h3>教研员解读</h3>
            <p><strong>系数 a (二次项系数):</strong></p>
            <ul>
                <li>决定抛物线的<strong>开口方向</strong>和<strong>开口大小</strong>。</li>
                <li>当 <strong>a > 0</strong> 时，开口向上；当 <strong>a < 0</strong> 时，开口向下。</li>
                <li><strong>|a|</strong> (a的绝对值) 越大，开口越<strong>窄</strong>；<strong>|a|</strong> 越小，开口越<strong>宽</strong>。
                </li>
            </ul>
            <p><strong>系数 b (一次项系数):</strong></p>
            <ul>
                <li>与 a 共同决定<strong>对称轴</strong>的位置 (对称轴为 x = -b/2a)。</li>
                <li>当 <strong>a, b 同号</strong> (都为正或都为负) 时，对称轴在 y 轴<strong>左侧</strong>。</li>
                <li>当 <strong>a, b 异号</strong> 时，对称轴在 y 轴<strong>右侧</strong>。</li>
                <li>当 <strong>b = 0</strong> 时，对称轴就是 y 轴。</li>
            </ul>
            <p><strong>系数 c (常数项):</strong></p>
            <ul>
                <li>决定抛物线与 <strong>y 轴的交点</strong>。</li>
                <li>交点坐标为 <strong>(0, c)</strong>。调整 c，图像会整体<strong>上下平移</strong>。</li>
            </ul>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- 1. 获取 DOM 元素 ---
            const canvas = document.getElementById('graph-canvas');
            const ctx = canvas.getContext('2d');

            const sliderA = document.getElementById('slider-a');
            const sliderB = document.getElementById('slider-b');
            const sliderC = document.getElementById('slider-c');

            const valueA = document.getElementById('value-a');
            const valueB = document.getElementById('value-b');
            const valueC = document.getElementById('value-c');

            const equationDisplay = document.getElementById('equation-display');

            // --- 2. 画布基本配置 ---
            const width = canvas.width;
            const height = canvas.height;
            const origin = { x: width / 2, y: height / 2 };
            const scale = 20; // 缩放比例：20像素代表1个单位

            // --- 3. 核心绘图函数 ---
            function draw() {
                // 获取当前滑块的值
                const a = parseFloat(sliderA.value);
                const b = parseFloat(sliderB.value);
                const c = parseFloat(sliderC.value);

                // 清空画布
                ctx.clearRect(0, 0, width, height);

                // 绘制坐标系和网格
                drawGrid();
                drawAxes();

                // 绘制二次函数曲线
                drawParabola(a, b, c);

                // 更新界面上的数值和方程式
                updateUI(a, b, c);
            }

            function drawGrid() {
                ctx.beginPath();
                ctx.strokeStyle = '#e0e0e0'; // 网格颜色
                ctx.lineWidth = 0.5;

                // 绘制垂直网格线
                for (let i = scale; i < width; i += scale) {
                    ctx.moveTo(origin.x + i, 0);
                    ctx.lineTo(origin.x + i, height);
                    ctx.moveTo(origin.x - i, 0);
                    ctx.lineTo(origin.x - i, height);
                }
                // 绘制水平网格线
                for (let i = scale; i < height; i += scale) {
                    ctx.moveTo(0, origin.y + i);
                    ctx.lineTo(width, origin.y + i);
                    ctx.moveTo(0, origin.y - i);
                    ctx.lineTo(width, origin.y - i);
                }
                ctx.stroke();
            }

            function drawAxes() {
                ctx.beginPath();
                ctx.strokeStyle = '#616161'; // 坐标轴颜色
                ctx.lineWidth = 1.5;

                // X 轴
                ctx.moveTo(0, origin.y);
                ctx.lineTo(width, origin.y);
                // Y 轴
                ctx.moveTo(origin.x, 0);
                ctx.lineTo(origin.x, height);
                ctx.stroke();

                // 绘制刻度
                ctx.font = '10px Arial';
                ctx.fillStyle = '#333';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'top';
                // X轴刻度
                for (let i = scale; i < origin.x; i += scale) {
                    if ((i / scale) % 5 === 0) { // 每5个单位一个大刻度
                        ctx.fillText(i / scale, origin.x + i, origin.y + 5);
                        ctx.fillText(-i / scale, origin.x - i, origin.y + 5);
                    }
                }
                ctx.textAlign = 'right';
                ctx.textBaseline = 'middle';
                // Y轴刻度
                for (let i = scale; i < origin.y; i += scale) {
                    if ((i / scale) % 5 === 0) { // 每5个单位一个大刻度
                        ctx.fillText(i / scale, origin.x - 5, origin.y - i);
                        ctx.fillText(-i / scale, origin.x - 5, origin.y + i);
                    }
                }
            }

            function drawParabola(a, b, c) {
                // a=0时不是抛物线，为防止性能问题和逻辑错误，直接不画
                if (Math.abs(a) < 0.01) {
                    // 可以选择画一条直线 y = bx + c
                    ctx.beginPath();
                    ctx.strokeStyle = '#c2185b'; // 曲线颜色
                    ctx.lineWidth = 2.5;
                    const startX = -origin.x / scale;
                    const endX = (width - origin.x) / scale;
                    const startY = b * startX + c;
                    const endY = b * endX + c;
                    ctx.moveTo(origin.x + startX * scale, origin.y - startY * scale);
                    ctx.lineTo(origin.x + endX * scale, origin.y - endY * scale);
                    ctx.stroke();
                    return;
                }

                ctx.beginPath();
                ctx.strokeStyle = '#c2185b'; // 曲线颜色
                ctx.lineWidth = 2.5;

                let firstPoint = true;

                // 遍历画布的每一个像素列，计算对应的函数值并连接
                for (let px = 0; px < width; px++) {
                    // 将画布像素坐标转换为数学坐标
                    const x = (px - origin.x) / scale;
                    // 计算 y 值
                    const y = a * x * x + b * x + c;
                    // 将数学坐标转换回画布像素坐标
                    const py = origin.y - y * scale;

                    // 如果点在画布可视范围内，则绘制
                    if (py > 0 && py < height) {
                        if (firstPoint) {
                            ctx.moveTo(px, py);
                            firstPoint = false;
                        } else {
                            ctx.lineTo(px, py);
                        }
                    } else {
                        // 如果点移出画布，重置firstPoint，以便下次进入时使用moveTo
                        firstPoint = true;
                    }
                }
                ctx.stroke();
            }

            function updateUI(a, b, c) {
                // 更新滑块旁边的数值显示
                valueA.textContent = a.toFixed(1);
                valueB.textContent = b.toFixed(1);
                valueC.textContent = c.toFixed(1);

                // 动态生成美观的方程式字符串
                let equation = `${a.toFixed(1)}x²`;
                if (b >= 0) {
                    equation += ` + ${b.toFixed(1)}x`;
                } else {
                    equation += ` - ${Math.abs(b).toFixed(1)}x`;
                }
                if (c >= 0) {
                    equation += ` + ${c.toFixed(1)}`;
                } else {
                    equation += ` - ${Math.abs(c).toFixed(1)}`;
                }
                equationDisplay.innerHTML = equation;
            }

            // --- 4. 绑定事件监听器 ---
            sliderA.addEventListener('input', draw);
            sliderB.addEventListener('input', draw);
            sliderC.addEventListener('input', draw);

            // --- 5. 初始绘制 ---
            draw();
        });
    </script>
</body>

</html>